(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["index"]=t():e["index"]=t()})("undefined"!==typeof self?self:this,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="fae3")}({f6fd:function(e,t){(function(e){var t="currentScript",r=e.getElementsByTagName("script");t in e||Object.defineProperty(e,t,{get:function(){try{throw new Error}catch(n){var e,t=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(n.stack)||[!1])[1];for(e in r)if(r[e].src==t||"interactive"==r[e].readyState)return r[e];return null}}})})(document)},fae3:function(e,t,r){"use strict";var n;(r.r(t),"undefined"!==typeof window)&&(r("f6fd"),(n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(r.p=n[1]));class i{constructor(e,t){this.url=e,this.owner=t||{$set(e,t,r){e[t]=r}}}array(e={},t=[]){return this.index(e,t),t}row(e,t={},r={}){return this.load(e,t,r),r}index(e={},t=null){return this.get(this.url,e,t)}load(e,t={},r=null){return this.get(this.url+"/"+e,t,r).then(e=>e.data.data)}refresh(e,t={}){return e instanceof Array?this.index(t,e).then(e=>e.data.data):this.load(e.id,t,e)}get(e,t={},r=null){return this.axios(r,{url:e,method:"get",params:t})}post(e={},t=null){return this.axios(t,{url:this.url,method:"post",data:e})}call(e,t,r={},n=null){return this.axios(n,{url:this.url+(e?"/"+e:""),method:"post",data:{call:{method:t,parameters:r}}}).then(e=>e.data.response)}put(e={},t=null){return this.axios(t,{url:this.url+"/"+e.id,method:"put",data:e})}save(e={},t=null){return this.put(e,t)}delete(e,t=null){return this.axios(t,{url:this.url+"/"+(isNaN(e)?e.id:e),method:"delete"})}assign(e,t){Object.keys(t).forEach(r=>{this.owner.$set(e,r,t[r])})}axios(e,t){return window.axios(t).then(t=>{return t.data.data&&(e instanceof Array?e.splice(0,e.length,...t.data.data):e instanceof Object&&this.assign(e,t.data.data)),t})}}var a=i,o={beforeCreate(){const e=this;this.$api=new Proxy({},{get(t,r){return t[r]?t[r]:t[r]=new a(r,e)}})},data(){return{apiPrevIndex:{},apiIsRunning:!1}},watch:{apiIndex:{handler(e){for(let t in e){let r=JSON.stringify(e[t]);if(r!==JSON.stringify(void 0===this.apiPrevIndex[t]?null:this.apiPrevIndex[t])){let e=JSON.parse(r),n=e.$api?e.$api:t,i=e.$call?e.$call:null,a=e.$id?e.$id:null;delete e.$api,delete e.$call,delete e.$id,this.apiIsRunning=!0,(i?this.$api[n].call(a,i,e).then(e=>window._.set(this,t,e)):this.$api[n].refresh(window._.get(this,t),e)).then(e=>{return this.apiIsRunning=!1,e})}}this.apiPrevIndex=JSON.parse(JSON.stringify(void 0===e?{}:e))},deep:!0,immediate:!0}}};window.Resource=a,window.ResourceMixin=o}})});
//# sourceMappingURL=index.umd.min.js.map