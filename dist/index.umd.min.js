(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["index"]=e():t["index"]=e()})("undefined"!==typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fae3")}({f6fd:function(t,e){(function(t){var e="currentScript",n=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(r){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(r.stack)||[!1])[1];for(t in n)if(n[t].src==e||"interactive"==n[t].readyState)return n[t];return null}}})})(document)},fae3:function(t,e,n){"use strict";var r;(n.r(e),"undefined"!==typeof window)&&(n("f6fd"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=r[1]));class i{constructor(t,e){this.url=t,this.owner=e||{$set(t,e,n){t[e]=n}}}array(t={},e=[]){return this.index(t,e),e}row(t=null,e={},n={}){return t instanceof Object?(this.load(null,t,e),e):(this.load(t,e,n),n)}index(t={},e=null){return this.get(t,e,this.url).then(t=>t.data)}load(t=null,e={},n=null){return this.get(e,n,t?`${this.url}/${t}`:this.url).then(t=>t.data.data)}refresh(t,e={},n=[]){return t instanceof Array?this.index(e,t.splice(0,t.length,...n||[])&&t).then(t=>t.data):this.load(t.id,e,t)}get(t={},e=null,n=this.url){return this.axios(e,{url:n,method:"get",params:t})}post(t={},e=null,n=this.url){return this.axios(e,{url:n,method:"post",data:{data:t}})}call(t,e={},n={},r=null){return"string"===typeof t&&e instanceof Object&&(r=n,n=e,e=t,t=null),this.axios(r,{url:this.url+(t?"/"+t:""),method:"post",data:{call:{method:e,parameters:n}}}).then(t=>{return r instanceof Array?r.push(...t.data.response):r instanceof Object&&this.assign(r,t.data.response),t.data.response})}rowCall(t,e={},n={},r={}){return"string"===typeof t&&e instanceof Object?(this.call(t,e,n,r),n):(this.call(t,e,n,r),r)}arrayCall(t,e={},n=[],r=[]){return"string"===typeof t&&e instanceof Object?(this.call(t,e,n,r),n):(this.call(t,e,n,r),r)}put(t={},e=null,n=this.url){return this.axios(e,{url:n,method:"put",data:{data:t}})}patch(t={},e=null,n=this.url){return this.axios(e,{url:n,method:"patch",data:{data:t}})}save(t={},e=null){return this.put(t,e,`${this.url}/${t.id}`)}delete(t=null,e=null){return this.axios(e,{url:t?this.url+"/"+(isNaN(t)?t.id:t):this.url,method:"delete"})}assign(t,e){Object.keys(e).forEach(n=>{this.owner.$set(t,n,e[n])})}axios(t,e){return window.axios(e).then(e=>{return e.data.data&&(t instanceof Array?t.push(...e.data.data):t instanceof Object&&this.assign(t,e.data.data)),e})}}var a=i;const s=["_isVue","_vm","toJSON","state","render"],o={get(t,e){if("symbol"!==typeof e&&!s.includes(e))return void 0!==t[e]?t[e]:l(e,t,t.owner)}};function l(t,e=null,n=null){const r=e?`${e.url}/${t}`:t;return new Proxy(new a(r,n),o)}var u={beforeCreate(){const t=this;this.$api=new Proxy({},{get(e,n){return e[n]?e[n]:e[n]=l(n,null,t)}})},data(){return{apiPrevIndex:{},apiIsRunning:!1}},watch:{apiIndex:{handler(t){for(let e in t){let n=JSON.stringify(t[e]);if(n!==JSON.stringify(void 0===this.apiPrevIndex[e]?null:this.apiPrevIndex[e])){let t=JSON.parse(n),r=t.$api?t.$api:e,i=t.$call?t.$call:null,a=t.$id?t.$id:null;delete t.$api,delete t.$call,delete t.$id,this.apiIsRunning=!0,(i?this.$api[r].call(a,i,t).then(t=>window._.set(this,e,t)):this.$api[r].refresh(window._.get(this,e),t)).then(t=>{return this.apiIsRunning=!1,t})}}this.apiPrevIndex=JSON.parse(JSON.stringify(void 0===t?{}:t))},deep:!0,immediate:!0}}};window.Resource=a,window.ResourceMixin=u}})});
//# sourceMappingURL=index.umd.min.js.map